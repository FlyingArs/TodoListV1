<%# File Name: index.ejs * Author's Name: David Yu 200286902 * Website Name:http://tomassignment3.azurewebsites.net/ * File Desciption: this is the user administration page %>
<% include ../partials/header.ejs %>

<main class="container">
    <h1>Users</h1>
    <div class="panel panel-default">
        <div class="panel-heading">
            <a href="/users/add" title="Add User"><i class="fa fa-plus-circle"></i> Add a new User</a>
        </div> <!-- panel-heading -->
        <% if (users.length > 0) { %>
        <div class="panel-body table-responsive">
            <table class="table table-bordered table-striped table-hover">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Date Created</th>
                        <th>Date Updated</th>
                        <th></th>
                    </tr>
                </thead>
                </tbody>
                <% for (var i = 0; i < users.length; i++) { %>
                <tr>
                    <td>
                        <%= users[i].username %>
                    </td>
                    <td>
                        <%= users[i].email %>
                    </td>
                    <td>
                        <% var date = new Date(users[i].created);
                         var dateString = date.toDateString() + " " + date.toLocaleTimeString(); %>
                        <%= dateString %>
                    </td>
                    <td>
                        <% date = new Date(users[i].updated);
                         var dateString = date.toDateString() + " " + date.toLocaleTimeString(); %>
                        <%= dateString %>
                    </td>
                    <td>
                        <a href="/users/<%= users[i]._id %>" title="Edit" >
                            <button type="button" class="btn btn-primary">Edit</button>
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                        <a href="/users/delete/<%= users[i]._id %>" title="Delete" onclick="return confirm('Are you sure you want to delete this?');" >
                            <buton type="button" class="btn btn-danger">Delete</buton>
                            <i class="fa fa-trash-o"></i>
                        </a>
                    </td>   
                </tr>
                <% } %>
                </tbody>
            </table>
        </div> <!-- panel-body -->
        <% } %>
    </div><!-- panel panel-default -->

</main>
<% include ../partials/footer.ejs %>
